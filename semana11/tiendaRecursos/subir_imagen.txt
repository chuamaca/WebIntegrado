 protected void addPro(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
 ArrayList<String> pro = new ArrayList<>();
                Articulo p=new Articulo();
             
               PrintWriter out = response.getWriter();
      String arch=getServletContext().getRealPath("/files");
         
         out.print(arch);
     
        arch=arch.replaceAll("\\\\", "/");
        int pos=arch.indexOf("target");//build
        
        String res=arch.substring(0, pos-1);
         arch=res+"/src/main/webapp/imagen2"; 
            out.print("forma 1:"+arch);
           
             
                try {
                    FileItemFactory factory = new DiskFileItemFactory();
                    ServletFileUpload fileUpload = new ServletFileUpload(factory);
                    List items = fileUpload.parseRequest(request);
                    for (int i = 0; i < items.size(); i++) {
                        FileItem fileItem = (FileItem) items.get(i);
                        if (!fileItem.isFormField()) {
                            //File file = new File("C:\\Users\\USUARIO\\Desktop\\CarritoCompras\\" + fileItem.getName());
                             File file=new File(arch,fileItem.getName());
                          fileItem.write(file);
                             //  p.setImagen( fileItem.getName());
                                pro.add(fileItem.getName());
                            } else {
                          pro.add(fileItem.getString());
                        }
                    }
                  

                p.setCodc(pro.get(0));
                p.setNomart(pro.get(1));
                p.setPrecio(Double.parseDouble(pro.get(2)));
                p.setStk(Integer.parseInt(pro.get(3)));
                p.setImagen( pro.get(4));
               out.print("<br>"+p.toString());
                  obj.GrabaArt(p);
                } catch (Exception e) {
                    out.print("<br>error "+e.getMessage());
                }
            
         request.setAttribute("dato", obj.listaArticulo());
         request.setAttribute("arti", new Articulo());
        String pag = "/crudArticulo.jsp";
     // request.getRequestDispatcher(pag).forward(request, response);
    }