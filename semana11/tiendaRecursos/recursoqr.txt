   
    
protected void processRequest(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
               String texto=request.getParameter("texto");
               try{
		byte[] qrCodeImage = generateQrCodeForUri(texto);
		
		response.setContentType("image/png");
		
		// SECURITY NOTE: This Cache-Control header is not 'nice-to-have'. IT IS A REQUIREMENT.
		response.addHeader("Cache-Control", "no-store");
		
		try (OutputStream out = response.getOutputStream()) {
			out.write(qrCodeImage);
		}
               }catch(Exception ex){
                   ex.printStackTrace();
               }
    }
   private byte[] generateQrCodeForUri(String uri) throws WriterException {
		try {
			ByteArrayOutputStream stream = new ByteArrayOutputStream();
			BitMatrix matrix = new QRCodeWriter().encode(uri, BarcodeFormat.QR_CODE, 300, 300);
			MatrixToImageWriter.writeToStream(matrix, "PNG", stream);
			return stream.toByteArray();
		} catch (IOException | WriterException e) {
			// Given that this operation is entirely in memory, any such exceptions are indicative of bad input.
			throw new IllegalArgumentException("Invalid URI", e);
		}
	}